<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rational Expressions — Interactive Tutor Mode</title>
  <style>
    body {
      margin: 0;
      font-family: 'Comic Sans MS', 'Courier New', monospace;
      background: radial-gradient(circle at top, #1a1a2e, #05050a);
      color: #e6e6eb;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .game {
      width: 96%;
      max-width: 950px;
      background: linear-gradient(180deg, #16162a, #0e0e1a);
      border: 3px solid #6b6bff;
      border-radius: 22px;
      padding: 30px;
      box-shadow: 0 0 55px rgba(107,107,255,0.45);
      animation: popIn 0.4s ease;
    }
    @keyframes popIn {
      from { transform: scale(0.96); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    h1 {
      text-align: center;
      color: #9d9dff;
      margin-bottom: 4px;
      font-size: 2.4em;
    }
    h2 {
      text-align: center;
      font-weight: normal;
      color: #b3b3ff;
      font-size: 1.05em;
      margin-top: 0;
    }
    .stage {
      margin-top: 22px;
      font-size: 1.15em;
      line-height: 1.9;
      white-space: pre-line;
    }
    .fraction {
      display: inline-block;
      text-align: center;
      margin: 14px 0;
    }
    .fraction .top {
      display: block;
      padding: 6px 14px;
      border-radius: 10px;
      cursor: pointer;
    }
    .fraction .bar {
      height: 3px;
      background: #e6e6eb;
      margin: 4px 0;
    }
    .fraction .bottom {
      display: block;
      padding: 6px 14px;
      border-radius: 10px;
      cursor: pointer;
    }
    .highlight {
      background: rgba(107,107,255,0.35);
    }
    .danger {
      background: rgba(255,80,80,0.45);
    }
    .choices button, .start-btn, .next-btn {
      display: block;
      width: 100%;
      margin: 14px 0;
      padding: 18px;
      background: #1f1f38;
      color: #e6e6eb;
      border: 2px solid #6b6bff;
      border-radius: 16px;
      cursor: pointer;
      font-size: 1.1em;
      transition: all 0.15s ease;
    }
    .choices button:hover, .start-btn:hover, .next-btn:hover {
      background: #6b6bff;
      color: #05050a;
      transform: scale(1.03);
    }
    .status {
      margin-top: 20px;
      padding: 18px;
      border-left: 5px solid #6b6bff;
      background: rgba(107,107,255,0.12);
      min-height: 2.5em;
      animation: fadeIn 0.25s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .footer {
      margin-top: 24px;
      text-align: center;
      font-size: 0.9em;
      color: #9999cc;
    }
  </style>
</head>
<body>
<div class="game">
  <h1>Rational Expressions</h1>
  <h2>Interactive Tutor Mode — tap things, break fear</h2>

  <div id="stage" class="stage"></div>
  <div id="visual"></div>
  <div id="choices" class="choices"></div>
  <div id="status" class="status"></div>

  <div class="footer">Click things. Take your time. You are safe here.</div>
</div>

<script>
let lesson = 0;
let phase = 0;

const stage = document.getElementById('stage');
const visual = document.getElementById('visual');
const choices = document.getElementById('choices');
const status = document.getElementById('status');

function intro() {
  stage.textContent = "WELCOME.\n\nThis will explain rational expressions VERY slowly.\nYou will click parts of examples to learn them.\n\nReady?";
  visual.innerHTML = "";
  choices.innerHTML = "";
  status.textContent = "";

  const btn = document.createElement('button');
  btn.textContent = '▶ START LEARNING';
  btn.className = 'start-btn';
  btn.onclick = () => loadLesson();
  choices.appendChild(btn);
}

function loadLesson() {
  phase = 0;
  renderLesson();
}

function renderLesson() {
  choices.innerHTML = "";
  visual.innerHTML = "";

  if (lesson === 0) lessonFractions();
  if (lesson === 1) lessonEvaluate();
  if (lesson === 2) lessonUndefined();
  if (lesson === 3) lessonSimplify();
}

/* LESSON 1 — FRACTIONS */
function lessonFractions() {
  if (phase === 0) {
    stage.textContent = "LESSON 1 — THIS IS A FRACTION\n\nClick the TOP part.";
    const frac = buildFraction('x + 1', 'x − 2');
    frac.top.onclick = () => { frac.top.classList.add('highlight'); phase++; renderLesson(); };
    visual.appendChild(frac.el);
    status.textContent = "The top is called the numerator.";
  } else if (phase === 1) {
    stage.textContent = "Now click the BOTTOM part.";
    const frac = buildFraction('x + 1', 'x − 2');
    frac.bottom.onclick = () => { frac.bottom.classList.add('highlight'); phase++; renderLesson(); };
    visual.appendChild(frac.el);
    status.textContent = "The bottom is called the denominator.";
  } else {
    stage.textContent = "This whole thing is a rational expression.\nIt's just a fraction with x in it.";
    status.textContent = "Good. Let’s keep going.";
    nextLesson();
  }
}

/* LESSON 2 — EVALUATE */
function lessonEvaluate() {
  if (phase === 0) {
    stage.textContent = "LESSON 2 — EVALUATING\n\nClick where x = 3 is substituted.";
    const frac = buildFraction('3 + 1', '3 − 2');
    frac.top.onclick = frac.bottom.onclick = () => { frac.top.classList.add('highlight'); frac.bottom.classList.add('highlight'); phase++; renderLesson(); };
    visual.appendChild(frac.el);
    status.textContent = "Replace x with the number everywhere.";
  } else {
    stage.textContent = "4 ÷ 1 = 4";
    status.textContent = "Evaluating just means plugging in.";
    nextLesson();
  }
}

/* LESSON 3 — UNDEFINED */
function lessonUndefined() {
  if (phase === 0) {
    stage.textContent = "LESSON 3 — UNDEFINED VALUES\n\nClick the denominator.";
    const frac = buildFraction('x + 5', 'x − 3');
    frac.bottom.onclick = () => { frac.bottom.classList.add('danger'); phase++; renderLesson(); };
    visual.appendChild(frac.el);
    status.textContent = "If this becomes zero, math breaks.";
  } else {
    stage.textContent = "When x = 3, the bottom is zero.";
    status.textContent = "x = 3 is forbidden.";
    nextLesson();
  }
}

/* LESSON 4 — SIMPLIFY */
function lessonSimplify() {
  stage.textContent = "LESSON 4 — SIMPLIFYING\n\nMatching parts cancel.";
  status.textContent = "You're ready to answer questions now.";
  finish();
}

function nextLesson() {
  const btn = document.createElement('button');
  btn.textContent = 'Next';
  btn.className = 'next-btn';
  btn.onclick = () => { lesson++; phase = 0; renderLesson(); };
  choices.appendChild(btn);
}

function finish() {
  choices.innerHTML = '';
  const btn = document.createElement('button');
  btn.textContent = 'Finish Tutor Mode';
  btn.className = 'next-btn';
  btn.onclick = () => { stage.textContent = 'You survived.\nYou understand the basics.'; visual.innerHTML = ''; status.textContent = 'Genuinely proud of you.'; };
  choices.appendChild(btn);
}

function buildFraction(topText, bottomText) {
  const el = document.createElement('div');
  el.className = 'fraction';

  const top = document.createElement('div');
  top.className = 'top';
  top.textContent = topText;

  const bar = document.createElement('div');
  bar.className = 'bar';

  const bottom = document.createElement('div');
  bottom.className = 'bottom';
  bottom.textContent = bottomText;

  el.appendChild(top);
  el.appendChild(bar);
  el.appendChild(bottom);

  return { el, top, bottom };
}

intro();
</script>
</body>
</html>
